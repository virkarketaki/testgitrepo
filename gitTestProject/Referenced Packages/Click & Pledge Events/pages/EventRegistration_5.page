<apex:page controller="CnP_PaaS_EVT.EventRegistration" showHeader="false" standardStylesheets="false" action="{!checkcookie}">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
 <link type="text/css" rel="stylesheet"  href="{!URLFOR($Resource.datepicker, "datepicker/jquery.datepick.css")}" />
 
  <script src="{!URLFOR($Resource.DateTimePicker, "DateTimePicker/jquery.calendar.js")}" type="text/javascript"></script>  
        
 <link type="text/css" rel="stylesheet"  href="{!URLFOR($Resource.DateTimePicker, "DateTimePicker/jquery.calendar.css")}" />
          
<style>
     #cnp {
 
            line-height:25px;
            color:#CCC;
            font-family:Arial, Helvetica, sans-serif;
            font-size:11px;
            max-width:700px;
            text-align:center;
            margin:0 auto;
    
    } 
   .pbSubsection {
   /* background-color: #CCC;
   /* border-radius: 20px 20px 20px 20px;  padding: 9px;*/

  width: 600px; 
margin:24px auto 0 auto;

}
    .pbSubsection .detailList {
    border-collapse: collapse;
    font-family: 'Arial';
    font-size: 12px;
    margin-left: 3px;
    text-align: left;
    
      /*   box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);

      -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);*/

}

.pbSubsection .detailList tr:nth-child(1) td:nth-child(1)
{

   -webkit-border-top-left-radius: 10px;
    -khtml-border-radius-topleft: 10px; 
    -moz-border-radius-topleft: 10px;
    border-top-left-radius: 10px;
    line-height:30px
}
.pbSubsection .detailList tr:nth-child(1) td:nth-child(2)
{

-webkit-border-top-right-radius: 10px;
    -khtml-border-radius-topright: 10px;    
    -moz-border-radius-topright: 10px;
    border-top-right-radius: 10px;
}
.pbSubsection .detailList tr:nth-child(5) td:nth-child(1)
{

  -webkit-border-bottom-left-radius: 10px;
    -khtml-border-radius-bottomleft: 10px;  
    -moz-border-radius-bottomleft: 10px;
    border-bottom-left-radius: 10px;
}

.pbSubsection .detailList tr:nth-child(5) td:nth-child(2)
{

-webkit-border-bottom-right-radius: 10px;
    -khtml-border-radius-bottomright: 10px; 
    -moz-border-radius-bottomright: 10px;
    border-bottom-right-radius: 10px;
}
.detailList tr td.dataCol{

    line-height:25px;
    padding:0px;
}
.detailList tr td.first {
 background-color: #F2F2F2;
 color:#000;
 font-size:13px;
 padding-left :10px;
  font-weight: bold;
 }
 .detailList tr td.last {
 background-color: #F2F2F2;
 color:#000;
 }
#MainContent_divContent{
    border-radius: 10px;
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);


}
/* diveVTPage CSS */
#diveVTPage {
    border-radius: 10px;
    box-shadow:2px 2px 2px #CCC;
    font-family:Arial, Helvetica, sans-serif;
    font-size:11px; 

}
#diveVTPage {
    background-color: #FAFAFA;
    width:600px;
    margin: 0 auto;
}
 #topinfo, #topInfo2 {
    width:600px;
    background:transparent;
}
#diveVTPage #topInfo2 {
    padding-bottom:10px;

}
#diveVTPage .cardicn {
    display:block;
    text-align:center;
}
#diveVTPage .#topInfo table{
    width:100%;
    padding:0px;
    font-weight:normal;
    font-size:11px;

}

#diveVTPage td.last {
    padding:0px;

}

#diveVTPage .pbSubsection {
    margin-left: 3px;
    margin-top: 10px;
}
#divInformationArea {
    padding-top: 1px;
    text-align: left;
    width: 620px;
}
#diveVTPage  .paymenttbl {
   
}
#diveVTPage #topInfo2 .paymenttbl td.dataCol .paymenttbl td {
    padding:10px 0px 10px 0px;
}
#diveVTPage .PaymentMethod .paymenttbl{
    width:100%;
   // padding:5px 6px 5px 10px;

}
#diveVTPage .PaymentMethod table td {
    padding:5px 5px 5px 10px;
    

}

.datepick-month-header, .datepick-month-header select, .datepick-month-header input {
    height: 1.5em;
    background-color: #444;
    color: #fff;
    font-weight: bold;
     padding: 0px 0px;
}

input[type="text"], textarea, select,input[type="password"] {
    display:inline;
    -webkit-border-radius: 3px;
    -khtml-border-radius: 3px;  
    -moz-border-radius: 3px;
    border-radius: 3px;
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #AFCFD9;
    box-shadow: 0 0 3px #DDDDDD inset;
    color: #444444;
    font: 12px Arial,Helvetica,sans-serif;
    margin: 0;
    padding: 5px 6px;

}
#poblock ,  #invoiceblock ,  #custompayment, #TransactionBlock {
   margin:0px;

}
#poblock .paymenttbl td , #invoiceblock .paymenttbl td, #custompayment .paymenttbl td, #TransactionBlock .paymenttbl td {

   width:37%;
}

.msgsuc {
  border-radius:10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
     background-color:#D6F8D7;
     color:#000;
     font-size:12px;
     font-weight:bold;
     text-align:center;
     width:595px;
     border:solid 1px #009966;    
     margin:5px 0px;
     clear: both;
     line-height: 25px;
         display: block;
}
.msgerr {
  background-color: #FF5155;
    border: 1px solid #993300;
    border-radius: 10px 10px 10px 10px;
    clear: both;
    color: #FFFFFF;
    display: block;
    font-size: 12px;
    font-weight: bold;
    line-height: 25px;
    margin: 5px 0;
    text-align: center;
    width: 595px;
}
.clr{

clear:both;
}

.req{
color: #CC0000;

}

.pbSubsection .requiredBlock {
    background-color: transparent;
    bottom: 1px;
    height: 27px;
    left: -4px;
    position: absolute;
    top: 4px;
    width: 3px;
    color: #CC0000;
}
/* diveVTPage CSS END */



.dateFormat {
    display:none;
}


</style>
<script type="text/javascript" language="javascript" src="{!URLFOR($Resource.datepicker, "datepicker/jquery.datepick.js")}"></script> 
        
 <script>
 // diveVTPage Script 

  $(document).ready( function () {


   $.noConflict();
 $(".term").click( function() {
    $("#diveVTPage #topinfo table").removeAttr("class");
    $("#diveVTPage #topinfo table").addClass("paymenttbl");
 });
 
     

  });
  // diveVTPage Script End
   
 function paymentvalidation(disppaymenttype){ 


   var t=0;
   
               $(".required").each(function(){       
                           
                     var required_fields=$(this).val();
                  //  var show =$(this).attr('class');
                 // alert(show); 
                     if(required_fields=="")                      
                     {    t=t+1;
                          alert("Please enter required fields");
                          $(this).focus();
                          return false;   
                     }               
               })
               
    
                
           
  
   if(t==0){    
    
               var fn = $(".FirstName").val();
               var ln = $(".LastName").val();
               var email = $(".Email").val();
               var dob = $(".Birthdate").val();
               var phone = $(".Phone").val();               
               var an = $(".AssistantName").val();
               var ap = $(".AssistantPhone").val();
               var fax = $(".Fax").val();               
               var dp = $(".Department").val();
               var dis = $(".Description").val();
               var HomePhone = $(".HomePhone").val();
              // var CnP_PaaS_EVT__Languages__c = $(".CnP_PaaS_EVT__Languages__c").val();
               var LeadSource = $(".LeadSource").val();
              // var CnP_PaaS_EVT__Level__c = $(".CnP_PaaS_EVT__Level__c").val();
               var MailingCity = $(".MailingCity").val();
               var MailingCountry = $(".MailingCountry").val();
               var MailingState = $(".MailingState").val();
               var MailingStreet = $(".MailingStreet").val();
              
               var MailingPostalCode = $(".MailingPostalCode").val();
               var MobilePhone = $(".MobilePhone").val();
               var OtherCity = $(".OtherCity").val();
               var OtherCountry = $(".OtherCountry").val();
               var OtherPhone = $(".OtherPhone").val();
               var CnP_PaaS__Other_Province__c = $(".CnP_PaaS__Other_Province__c").val();
               var OtherState = $(".OtherState").val();
               var OtherStreet = $(".OtherStreet").val();
               var OtherPostalCode = $(".OtherPostalCode").val();
               var Salutation = $(".Salutation").val();
               var Title_1 = $(".Title").val();
               var DateField=$(".DATE").val();
               var PhoneField =$(".PHONE").val();
               var EmailField=$(".EMAIL").val();
               var DateTimeField=$(".DATETIME").val();
              
               var UrlField =$(".URL").val();
               var PercentageField=$(".PERCENT").val(); 
               var NumberField= $(".DOUBLE").val();
            //   Var CurrencyField= $(".CURRENCY").val(); 
               var Textareafield= $(".TEXTAREA").val(); 
               
              
               var Checkbox =$(".BOOLEAN").attr('checked');
              
              
               var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
               var reg_text=/^([a-zA-Z0-9\'\,\.\-\ ])+$/;
               var reg_fname=/^([a-zA-Z0-9\.\,\#\&\-\'\ ])+$/;
               var reg_billingcity=/^([a-zA-Z0-9\.\,\&\-\'\ ])+$/;
               var reg_billingprovince=/^([a-zA-Z0-9\.\,\&\-\'\ ])+$/;
               var reg_billingpostalcode=/^([a-zA-Z0-9\.\-\ ]{2,20})+$/;
               var reg_billingphone=/^([0-9\.\-\(\)\+\ ])+$/;
               var reg_billingaddress1=/^([a-zA-Z0-9\.\,\#\&\-\'\ ])+$/;
                var reg_cardname=/^([a-zA-Z0-9\.\,\#\-\'\ ])+$/;
               
               var reg_num=/^([0-9\.\-\(\)\ ])+$/;
               var reg_zip=/^([A-Za-z0-9\.\-\ ])+$/;
               var reg_email =/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;
               var reg_Phone=/^([0-9+\.\-\(\)\ ])+$/;
               // var  reg_dob = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;
               var reg_dob=/^\d{1,2}\/\d{1,2}\/\d{4}$/;
               var validformattime = /^\d{1,2}:\d{2}$/;
               var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
               var validatepercentage =/^(100(?:\.0{1,2})?|0*?\.\d{1,2}|\d{1,2}(?:\.\d{1,2})?)$/;
               var check=new Date();
               var c_mo=(check.getMonth()+1);
               var c_ye=check.getFullYear();
               c_ye =c_ye.toString().slice(2);
               var mo = $(".select_ExpirationMonth").val();
               var yr = $(".select_ExpirationYear").val();
               c_mo += '';
                
               if(c_mo.length==1){
                   c_mo = '0'+c_mo;
               }
               var  numvalidation =/^([0-9])+$/;
               var  stringnumsvalidation=/^([a-zA-Z0-9\.\,\#\&\-\'\ ])+$/;
               var creditnamevalidation=/^([a-zA-Z0-9\.\,\#\&\-\ ])+$/;
               var creditcardname =jQuery.trim(jQuery(".txtNameOnCard").val());
               var nameonaccount =jQuery.trim(jQuery(".txtNameOnAccount").val());
               var reg_cardtype =/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})+$/;
               
               if(fn!="" && ( reg_fname.test(fn)==false || !fn.indexOf(' ',0)))
               {
                  t=t+1;
                  alert("Please enter a valid data");
                  $(".FirstName").focus();
                  return false;
               }
               if(ln!="" && ( reg_fname.test(ln)==false || !ln.indexOf(' ',0))){
                  t=t+1;
                  alert("Please enter a valid data");
                  $(".LastName").focus();
                  return false;
               }      
                       
               if(email!="" &&  reg.test(email)==false && email!=undefined)
               {
                   t=t+1;
                   alert("Please enter a valid Email");
                   $(".Email").focus();
                   return false;
               }
               
             
               if(dob!="" && reg_dob.test(dob)==false && dob!=undefined)
               {                  
                    alert("Please enter the valid date ");
                    $(".Birthdate").focus();
                    return false;
               }   
                            
              if(phone!="" && phone!=undefined && ( reg_Phone.test(phone)==false || !phone.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid phone number");
                   $(".Phone").focus();
                   return false;
               }  
                          
               if(an!="" && an!=undefined && (reg_text.test(an)==false || !an.indexOf(' ',0))){
                  t=t+1;
                   alert("Please enter a valid data");
                   $(".AssistantName").focus();
                   return false;
               }
                
              if(ap!="" && ap!=undefined  && ( reg_Phone.test(ap)==false || !ap.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid number");
                   $(".AssistantPhone").focus();
                   return false;
               }  
               
               if(fax!="" && fax!=undefined  && ( reg_num.test(fax)==false || !fax.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid number");
                   $(".Fax").focus();
                   return false;
               }   
                             
              if(dp!="" && dp!=undefined  && (reg_text.test(dp)==false || !dp.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".Department").focus();
                   return false;
               }
               
               if(dis!="" && dis!=undefined  && (reg_text.test(dis)==false || !dis.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".Description").focus();
                   return false;
               }
               
              if(HomePhone!="" && HomePhone!=undefined && ( reg_billingphone.test(HomePhone)==false || !HomePhone.indexOf(' ',0))){
                  t=t+1;
                   alert("Please enter a valid number");
                   $(".HomePhone").focus();
                   return false;
               }    
            
             if(MailingCity!="" && MailingCity!=undefined ){
                  
                  if(reg_billingcity.test(MailingCity)==false || !MailingCity.indexOf(' ',0)){
                       t=t+1;
                       alert("Please enter a valid data");
                       $(".MailingCity").focus();
                       return false;
                  }
                  if(MailingCity.length<2 || MailingCity.length>40){
                       t=t+1;
                       alert("City should be 2 to 40 characters only");
                       $(".MailingCity").focus();
                       return false;
                  }
             
              }
               
             
                 
               if(MailingCountry!="" && MailingCountry!=undefined && (reg_text.test(MailingCountry)==false || !MailingCountry.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".MailingCountry").focus();
                   return false;
               }
               if(MailingState!="" && MailingState!=undefined && (reg_billingprovince.test(MailingState)==false || !MailingState.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".MailingState").focus();
                   return false;
               }
               
               if(MailingStreet!="" && MailingStreet!=undefined){
                 
                   if(reg_billingaddress1.test(MailingStreet)==false || !MailingStreet.indexOf(' ',0)){
                           t=t+1;
                           alert("Please enter a valid data");
                           $(".MailingStreet").focus();
                           return false;
                   }
                    if(MailingStreet.length<2 || MailingStreet.length>255){
              
                            t=t+1;
                            alert("Address should be 2 to 255 characters only");
                            $(".MailingStreet").focus();
                            return false;
                    }            
               }     
             
              if(MailingPostalCode!="" && MailingPostalCode!=undefined ){
                  
                  if(reg_billingpostalcode.test(MailingPostalCode)==false || !MailingPostalCode.indexOf(' ',0)){
                  
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".MailingPostalCode").focus();
                   return false;
                  }
                  if(MailingPostalCode.length<2 || MailingPostalCode.length>20){
                       t=t+1;
                       alert("ZIP code should be 2 to 20 characters only");
                       $(".MailingPostalCode").focus();
                       return false;
                  }
               
               
               }
               
               
                 
              if(MobilePhone!="" && MobilePhone!=undefined && (reg_billingphone.test(MobilePhone)==false || !MobilePhone.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".MobilePhone").focus();
                   return false;
               }
               if(OtherCity!="" && OtherCity!=undefined && (reg_billingcity.test(OtherCity)==false || !OtherCity.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".OtherCity").focus();
                   return false;
               }
              
               if(OtherCountry!="" && OtherCountry!=undefined  && (reg_text.test(OtherCountry)==false || !OtherCountry.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".OtherCountry").focus();
                   return false;
               }
             if(OtherPhone!="" && OtherPhone!=undefined  && (reg_billingphone.test(OtherPhone)==false || !OtherPhone.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".OtherPhone").focus();
                   return false;
               }
              if(CnP_PaaS__Other_Province__c!="" && CnP_PaaS__Other_Province__c!=undefined && (reg_billingprovince.test(CnP_PaaS__Other_Province__c)==false || !CnP_PaaS__Other_Province__c.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".CnP_PaaS__Other_Province__c").focus();
                   return false;
               }
               if(OtherState!="" && OtherState!=undefined && (reg_billingprovince.test(OtherState)==false || !OtherState.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".OtherState").focus();
                   return false;
               }
               if(OtherStreet!="" && OtherStreet!=undefined && (reg_billingaddress1.test(OtherStreet)==false || !OtherStreet.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".OtherStreet").focus();
                   return false;
               }
               if(OtherPostalCode!="" && OtherPostalCode!=undefined && (reg_billingpostalcode.test(OtherPostalCode)==false || !OtherPostalCode.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".OtherPostalCode").focus();
                   return false;
               }
                                         
               if(Title_1!="" && Title_1!=undefined && (reg_text.test(Title_1)==false || !Title_1.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".Title").focus();
                   return false;
               }
               if(DateField!="" && DateField!=undefined && (reg_dob.test(DateField)==false || !DateField.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".DATE").focus();
                   return false;
               }
           
              if(DateTimeField!="" && DateTimeField!=undefined ){
       
               var parts = DateTimeField.split(" ");
                
              if(parts.length == 3){
                 var date = parts[0];
                 var time = parts[1];
                 var ampm = parts[2].trim();
               
                 if(ampm.length == 2 && (ampm.toLowerCase() == "am" || ampm.toLowerCase() == "pm")){
                
                     if (reg_dob.test(date)){
                        
                            if (validformattime.test(time) ==false)  {                     
                           
                               t=t+1;
                               alert("Please enter a valid data");
                               $(".DATETIME").focus();
                               return false;
                            }
                    }else{
                           t=t+1;
                           alert("Please enter a valid data");
                           $(".DATETIME").focus();
                           return false;
                    
                    }
                 }else{
                       t=t+1;
                       alert("Please enter a valid data");
                       $(".DATETIME").focus();
                       return false;
             
                 }
             }else{
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".DATETIME").focus();
                   return false;
          
          
             }
             }
            
            if(NumberField!="" && NumberField!=undefined && (numvalidation.test(NumberField)==false || !NumberField.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".DOUBLE").focus();
                   return false;
            }
             if(PhoneField !="" && PhoneField !=undefined && ( reg_Phone.test(PhoneField)==false || !PhoneField.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid phone number");
                   $(".PHONE").focus();
                   return false;
             }
             if(EmailField!="" &&  reg.test(EmailField)==false && EmailField!=undefined)
               {
                   t=t+1;
                   alert("Please enter a valid Email");
                   $(".EMAIL").focus();
                   return false;
               }
             
               
             if(UrlField!="" && UrlField!=undefined && (pattern.test(UrlField)==false || !UrlField.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".URL").focus();
                   return false;
            }
            
            if(PercentageField!="" && PercentageField!=undefined && (validatepercentage.test(PercentageField)==false || !PercentageField.indexOf(' ',0))){
                   t=t+1;
                   alert("Please enter a valid data");
                   $(".PERCENT").focus();
                   return false;
            }
        
            
            
           // if(Checkbox ==false){
                  // t=t+1;
                   //alert("Please Check the box");
                 
                  // $(".BOOLEAN").focus();
                  // return false;
           // }
          
            if(disppaymenttype=='CreditCard'){
               

                    if(creditcardname =="" || creditcardname ==null){
                       t=t+1;
                       alert("Name on Card Must be defined");
                       $(".txtNameOnCard").focus();     
                       return false;
                        
                    }else if(!reg_cardname.test(creditcardname)){
                            t=t+1;
                          alert("Please enter the only Alphanumeric . and space for  Name on Card");
                          $(".txtNameOnCard").focus();
                          return false;
                    }else if(creditcardname.length <2){
                            t=t+1;
                           alert("Name on Card Must be 2 Characters");
                           $(".txtNameOnCard").focus();     
                           return false;   
                    }
                    
                    if($(".txtCardNumber").val()=="" || $(".txtCardNumber").val()==null ){
                        t=t+1;
                        alert("Credit Card Number Must be defined");
                        $(".txtCardNumber").focus();
                          return false;    
                    
                    }else if(!reg_cardtype.test($(".txtCardNumber").val())){
                            t=t+1;
                          alert("Credit Card Number Must be Valid Number");
                          $(".txtCardNumber").focus();
                          return false;
                    }
                    
                     if($(".txtCvv").val()=="" || $(".txtCvv").val()==null ){
                         t=t+1;
                        alert("Card Verification (CVV) Must be defined");
                        $(".txtCvv").focus();
                          return false;    
                    
                    }else if($(".txtCvv").val()!="" && $(".txtCvv").val().length<3) {
                               t=t+1;
                            alert("Please Enter a Number atleast 3 digits in Card Verification (CVV)");
                            jQuery(".txtCvv").focus();
                            return false;
                        } 
                    
                    
                     if(mo =="--Select--"){
                            t=t+1;
                         alert("Expiration Date must be defined");
                         $(".select_ExpirationMonth").focus();
                         return false;
                        
                    }else if(c_ye >= yr && c_mo > mo){
                            t=t+1;
                           alert("Expiration Date Must be Valid ");
                           return false;   
                    }
      
 
              }
              
             if(disppaymenttype=='ReferenceTransaction'){
             
                if($(".txtOrderNumber").val()==""){
                    t=t+1;
                    alert("Please Enter Order Number !");
                   $(".txtOrderNumber").focus();    
                   return false;
                
                }else if($(".txtVaultguid").val()==""){
                    t=t+1;
                    alert("Please Enter Valid GUID !");
                   $(".txtVaultguid").focus();  
                   return false;
                
                }
                
                
             
             }
              if(disppaymenttype=='Check'){
             
                if($(".txtRoutingNumber").val()==""){
                     t=t+1;
                    alert("Routing Number Must be defined");
                   $(".txtRoutingNumber").focus();  
                   return false;
                
                } else if($(".txtRoutingNumber").val()!="")
                {
                      if(!numvalidation.test($(".txtRoutingNumber").val()))
                      {
                              t=t+1;
                                          alert("Routing Number Must contain numerics only");
                                          jQuery(".txtRoutingNumber").focus();
                                          return false;
                      }
                      else if(($(".txtRoutingNumber").val()).length<9)
                      {
                              t=t+1;
                                          alert("Routing Number Must contain 9 digits");
                                          jQuery(".txtRoutingNumber").focus();
                                          return false;
                      }
                 }
                 if($(".txtCheckNumber").val()=="" || $(".txtCheckNumber").val()==null)
                  {
                           t=t+1;
                                      alert("Check Number Must be defined");
                                      $(".txtCheckNumber").focus();
                                      return false;
                  }
                  else if($(".txtCheckNumber").val()!="" && !numvalidation.test($(".txtCheckNumber").val()))
                  {
                            t=t+1;
                                      alert("Check Number Must contain numerics only");
                                      $(".txtCheckNumber").focus();
                                      return false;
                  }
                  
                  if($(".txtAccountNumber").val()=="" || $(".txtAccountNumber").val()==null)
                  {
                           t=t+1;
                                      alert("Account Number Must be defined");
                                      $(".txtAccountNumber").focus();  
                                      return false;
                  }
                  else if($(".txtAccountNumber").val()!="" && !numvalidation.test($(".txtAccountNumber").val()))
                  {
                           t=t+1;
                                      alert("Account Number Must contain numerics only");
                                      $(".txtAccountNumber").focus();  
                                      return false;
                  }
                  
                  if($(".txtAccountNumber2").val()=="" || $(".txtAccountNumber2").val()==null)
                  {
                           t=t+1;
                                      alert("Repeat Account Number Must be defined");
                                      $(".txtAccountNumber2").focus();
                                      return false;
                  }
                  else if($(".txtAccountNumber2").val()!="" && (!numvalidation.test($(".txtAccountNumber2").val())))
                  {
                           t=t+1;
                                      alert("Repeat Account Number Must contain numerics only");
                                      $(".txtAccountNumber2").focus();
                                      return false;
                  
                  }else   if($(".txtAccountNumber").val()!=$(".txtAccountNumber2").val()){
                              t=t+1;                 
                                      alert("Repeat Account Number should match with Account Number !");
                                      $(".txtAccountNumber2").focus(); 
                                      return false;
                
                  }
                  
                  if(nameonaccount =="" || nameonaccount ==null)
                  {
                           t=t+1;
                                      alert("Name on Account Must be defined");
                                      $(".txtNameOnAccount").focus();
                                      return false;
                  }
                  else if(nameonaccount !="" &&!stringnumsvalidation.test(nameonaccount ))
                  {
                           t=t+1;
                                      alert("Please Enter valid data in Name on Account");
                                      $(".txtNameOnAccount").focus();
                                      return false;
                  }else if(nameonaccount.length <2){
                           t=t+1;
                                      alert(" Name on Account Must be 2 Characters");
                                      $(".txtNameOnAccount").focus();
                                      return false;
                  
                  
                  }
                  
                   
            
              
              
             }
             
             if(disppaymenttype=='PurchaseOrder'){   
                if($(".txtPOAccount").val()=="" || !numvalidation.test($(".txtPOAccount").val())){
                t=t+1;
                 alert("Purchase Order Number must be a valid number");
                 $(".txtPOAccount").focus(); 
                                      return false;
                }
             
             }
             /*if(disppaymenttype=='Invoice'){
             if($(".txtInvoiceAccount").val()=="" || !numvalidation.test($(".txtInvoiceAccount").val())){
                t=t+1;
                 alert("Invoice Check Number must be a valid number");
                 $(".txtInvoiceAccount").focus(); 
                                      return false;
                }    
                
             
             }*/
            
          
           
                       
              
              
          }
  
  if(t!=0)
  {
       return false; 
  }else
       return true;
 
    
//onkeyup="javascript:this.value=this.value.replace(/[^A-Za-z0-9\s\-]+/g, '');"
    
 
 
 
 }
 
 function check1(val)
  {
    
     if(val==true)
     {
      
    
       $(".next1").fadeIn(1000); 
     }else{
  
       $(".next1").fadeOut(1000); 
     }
     
  }
  function insertJS(){
InsertRecord_JS();
}
  function CallWebService_JS(){
CallWebService_JS();
}

 function trimvalue(value,fieldclass)
{
     var replace=$.trim(value); 
     $("."+fieldclass).attr('value',replace);
}
           
               
            
  </script>
<apex:form >

 <apex:pageBlock rendered="{!if(StyleRec.CnP_PaaS_EVT__Theme_Selection__c=='Standard Theme',true,false)}">
 <apex:include pageName="CnP_PaaS_EVT__EventRegistrationLayout"/>
 <apex:actionFunction action="{!UpdateRegistrant}" name="InsertRecord_JS" oncomplete="CallWebService_JS();" rerender="" status="mySaveStatus_2"/>
<apex:actionFunction action="{!PaymentAPIMethod}" name="CallWebService_JS" rerender="resulttransactionsucess,resulttransactionfail" status="mySaveStatus_2"/> 
 <div id="Main">
  
  <div id="Header" style="display:{!IF(StyleRec.CnP_PaaS_EVT__Display_Banner__c==true,'block','none')}">
    <div id="HeaderLeft"> <span class="Title"><apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Upload_banner__c}" escape="false"/></span></div>
   
  </div>
  
  <div id="ContentArea">
    <div id="Right">
    <apex:outputLink value="/servlet/servlet.FileDownload?file={!pdfId}" target="_blank" style="text-decoration:none">
     <div align="right" class="DownloadAgenda" id="{!pdfId}" style="display:{!IF(StyleRec.CnP_PaaS_EVT__Show_ajenda__c==true && pdfId!="",'block','none')}">
         <div style="margin-top:2px;float:left;"><apex:image url="{!URLFOR($Resource.CnP_PaaS_EVT__pdf_icon)}" /></div>{!if(EventRec.CnP_PaaS_EVT__Agenda_Display_Name__c!="",EventRec.CnP_PaaS_EVT__Agenda_Display_Name__c,'Download Agenda')}
        
     </div>
     </apex:outputLink>
     <div id="ContentTop" >
        <div style="display:{!IF(StyleRec.Display_Title_Information__c==true,'block','none')}"> 
        <apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Title_and_information__c}" escape="false"/>
        </div> 

          
</div>
                             <br/>  
                             <div id="ContentBott">
                         <div class="Box">
                              
                            <div class="Top">
                                  <!-- <div class="T-Left"></div>-->
                                    <div class="Title1" style="display:{!IF(StyleRec.Display_Title__c==true,'block','none')}">
                                        <h3 class="t1"><apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Section_Title__c}" escape="false"/></h3>
                                        
                                    </div>  
                                   <!-- <div class="T-Right"></div>-->
                            </div>
                            <div class="ContMiddle" >
                            
                            <div style="display:{!IF(StyleRec.Display_Description__c==true,'block','none')}">
                             <apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Section_Description__c}" escape="false"/>
                            </div>
                            <div style="display:{!if(timeout==true,'block','none')}">
                                    <apex:outputtext value="{!EventRec.CnP_PaaS_EVT__Event_Ended__c}" escape="false"/> 
                           </div> 
                           <div style="display:{!if(eventsoldout==true,'block','none')}">
                                   <apex:outputtext value="{!EventRec.CnP_PaaS_EVT__Sold_Out__c}" escape="false"/> 
                            </div>
                            <!--<div align="left" style="padding-top:10px;">
                                <apex:commandButton value="Back" action="{!goBack}" styleClass="Submit" style="color:black"/>
                            </div>--> 
                            <apex:pageBlockSection >   
                            
<apex:repeat value="{!AttendeePaymentList}" var="field">
</apex:repeat>
                  <apex:outputLabel value="Payment Summary" style=" ">
</apex:outputLabel>                 <apex:outputText value="" />
                 <apex:outputLabel value="Total Fee"  style="padding-left:10px;font-weight:bold;text-align:left;display:block;float:left;width: 95%;" ></apex:outputLabel>
                 <apex:outputText value="{0, number,$###,###,##0.00}" style="width:80px;text-align:right;font-weight:bold;display:block;float:right; margin-right: 12px;"><apex:param value="{!GrossPrice}"/></apex:outputText>
            
                 <apex:outputLabel value="Total Discount" style="padding-left:10px;font-weight:bold;text-align:left;display:block;float:left;border-top:1px dotted #F2F2F2;width: 100%; " ></apex:outputLabel>
                 <apex:outputText value="{0, number,-$###,###,##0.00}" style="width:80px;text-align:right;font-weight:bold;display:block;float:left;border-top:1px dotted #F2F2F2;width: 95%; ">
                 <apex:param value="{!TotalDiscount}"/>      </apex:outputText>
                 
            <apex:outputLabel value="Total Tax" style="padding-left:10px;font-weight:bold;text-align:left;display:block;float:left;border-top:1px dotted #F2F2F2;width: 100%; " ></apex:outputLabel>
                 <apex:outputText value="{0, number,$###,###,##0.00}" style="width:80px;text-align:right;font-weight:bold;display:block;float:left;border-top:1px dotted #F2F2F2;width: 95%; ">
                 <apex:param value="{!TotalTax}"/>
                 </apex:outputText>
                 
                 
                 <apex:outputLabel value="Grand Total" style="padding-left:10px;font-weight:bold;text-align:left;display:block;float:left;border-top:1px dotted #F2F2F2;width: 100%;   " ></apex:outputLabel>
                  <apex:outputText value="{0, number,$###,###,##0.00}" style="width:80px;text-align:right;font-weight:bold;display:block;float:right; margin-right: 12px; ">
                 <apex:param value="{!NetPrice}"/>
                 </apex:outputText>
                 
                 
                  <!--<apex:dataTable columns="5" cellpadding="3px" cellspacing="2px"  value="{!PaymentUrlframeMethod}" var="field" >
                  </apex:dataTable>-->

                  </apex:pageBlockSection> 
                            <br/>
                              
                             <div id="ContentBot" style="display:{!IF(StyleRec.CnP_PaaS_EVT__Show_terms_conditions__c==true,'block','none')}">      
                              <apex:inputCheckbox id="term" styleClass="term" onclick="return check(this.checked);" style="display:{!IF(StyleRec.CnP_PaaS_EVT__Acknowledgement_mandatory__c==true,'block','none')}"/>                            
                              <apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Terms_conditions__c}" escape="false"/>                 
                             </div>
                            <br/>
                       
     <div style="display:{!IF(StyleRec.Acknowledgement_mandatory__c==true,'none','block')}" class="next">
                     
     <!--Payment Form Start Here  -->    
 
    <apex:outputPanel id="resulttransactionfail123" >
     <apex:outputpanel rendered="{!IF(Resultdisply!='','true','false')}">
    <apex:outputtext value="{!Resultdisply}" escape="false" />
     </apex:outputpanel>    
    </apex:outputPanel>
                     
    <apex:outputpanel id="paymentblock">
    <apex:outputPanel style="display:{!IF(Resultdisply!='' && Resultdisply=='Transaction processed successfully','none','block')}"> 
    <div class="clr"></div><div class="clr"></div>           
    <div id="diveVTPage" >
    <div id="topinfo">
    <div id="divInformationArea">  
        <script type="text/javascript">

      

            $(document).ready(function (){ 

              $(".DATETIME").calendar({
                
                dateFormat:'MDY/',
                autoPopUp: "both",
                buttonImageOnly:true,
                buttonImage:'{!URLFOR($Resource.datepicker, "datepicker/calendar.gif")}',
                buttonText:'',              
                timeSeparators:[' ',':',' AM',' PM'],
                }
                
                );
               
                        
                         
                 $('.Birthdate').datepick({yearRange: 'c+0:1920',maxDate:-0,showTrigger: '<img src="{!URLFOR($Resource.datepicker, "datepicker/calendar.gif")}" alt="Calendar"></img>'});
               
               $('.DATE').datepick({
                       
                         
                         
                         showTrigger: '<img src="{!URLFOR($Resource.datepicker, "datepicker/calendar.gif")}" alt="Calendar"></img>'
             });
               

            });

       

        </script>
  <apex:panelGrid id="PaymentSelection"> 
        <!--    <apex:outputpanel id="PaymentSelection" > -->
           <apex:outputpanel id="PayeeInformation" styleClass="PaymentMethod"> 
             <!-- <script type="text/javascript" language="javascript" src="{!URLFOR($Resource.datepicker, "datepicker/jquery.datepick.js")}"></script> -->         
        
            <apex:pageBlockSection columns="2"  collapsible="false" title="{!IF(NetPrice==0,'Additional Information','Billing Information')}">
         
                              <apex:repeat value="{!availableContactFields}" var="field">                                
                                <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field!='MailingCountry',true,false)}">                                 
                                 <apex:outputPanel >
                                  <apex:outputText value="{!field.Label}"> </apex:outputText>
                                  <apex:outputtext value="{!IF(field.req==true,'<span class=req>*</span>','')}"  escape="false"></apex:outputText>
                                
                                  </apex:outputPanel>
               
                                 
                                 <apex:inputField value="{!acc[field.Field]}"    style="width:{!if(field.Label=="Title",'45px;','')}"     onblur="trimvalue(this.value,'{!IF(field.req==true ,field.Field,field.Field)}');" styleClass="{!IF(field.req==true ,IF($ObjectType.Contact.fields[field.Field].Custom==false,field.Field&' required',field.FieldType&' required'),if($ObjectType.Contact.fields[field.Field].Custom==false,field.Field,field.Fieldtype))}"/>
                                
                                

                                  </apex:pageBlockSectionItem>
                                  <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field!='MailingCountry',true,false)}">
                                  </apex:pageBlockSectionItem>
                                  <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field=='MailingCountry',true,false)}">
         <apex:outputPanel >
   <apex:OutputText value="Country" />
  <apex:outputtext value="{!IF(field.req==true,'<span class=req>*</span>','')}"  escape="false"></apex:outputText>
    <apex:outputText >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
     &nbsp;&nbsp;&nbsp;&nbsp;                             
                                   </apex:outputText>
   </apex:outputPanel>
   
   
   <apex:selectlist value="{!PayeeCountry}" size="1" styleClass="{!IF(field.req==true,field.Field&' required' ,field.Field)}">             
              <apex:selectOptions value="{!xmlstring.CountryCodes}"/>
          </apex:selectlist>
         
         </apex:pageBlockSectionItem>
              <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field=='MailingCountry',true,false)}">
              </apex:pageBlockSectionItem>                           
                                </apex:repeat>
                                </apex:pageblocksection>
        <script type="text/javascript">
           
          
            
           /*  $('.CnP_PaaS_EVT__DateField__c').datepick({
                         yearRange: 'c+0:1920',
                         maxDate:-0,
                         
                         showTrigger: '<img src="{!URLFOR($Resource.CnP_PaaS_EVT__datepicker, "datepicker/calendar.gif")}" alt="Calendar"></img>'
             }); */
           </script>
                        </apex:outputpanel>
         </apex:panelGrid>
        
       <apex:outputpanel id="PaymentSelection1" rendered="{!IF(NetPrice > 0.0,true,false)}">            
              <apex:pageblocksection >
             
                <apex:pageBlockSectionItem >
                <apex:outputpanel id="RefreshType">
                <apex:actionRegion >
                      <apex:selectRadio value="{!xmlPaymentMethod.PaymentType}" styleClass="paymenttype" >   
                      <apex:actionsupport event="onchange" action="{!ChangePaymentType}"  rerender="PaymentMethod,processpayment"/>          
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Credit_card__c==true,true,false)}"  itemValue="CreditCard" itemLabel="Credit Card"/>
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__e_check__c==true,true,false)}" itemValue="Check" itemLabel="eCheck" /> 
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Invoice_P_O__c==true,true,false)}" itemValue="Invoice" itemLabel="Invoice"/> 
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Purchase_order__c==true,true,false)}" itemValue="PurchaseOrder" itemLabel="Purchase Order"/>
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Custom_Payment_Check__c==true,true,false)}" itemValue="CustomPaymentType" itemLabel="{!EventPaymentOption.CnP_PaaS_EVT__Custom_Payment_Name__c}"/>
                        
                      </apex:selectRadio></apex:actionRegion>  </apex:outputpanel>
                </apex:pageBlockSectionItem>
            </apex:pageblocksection>
           </apex:outputPanel>
        <!-- </apex:panelGrid> -->
    <div class="clr"></div> 
    
     <apex:panelGrid id="PaymentMethod" rendered="{!IF(NetPrice > 0.0,true,false)}">
    <apex:outputpanel styleClass="PaymentMethod"> 
      
            
    <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='CreditCard'}">       
        <apex:pageblocksection columns="2">        
            <apex:pageBlockSectionItem > 
                <apex:outputpanel styleClass="cardicn"> 
                       <img style="display:{!IF(EventPaymentOption.Visa__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/visa.jpg')}" alt="visa" width="49" height="29" id="imgVisa" />&nbsp;&nbsp; <img style="display:{!IF(EventPaymentOption.master_card__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/mastercard.gif')}" alt="mastercard" width="49" height="29" id="imgMasterCard" />&nbsp;&nbsp; <img style="display:{!IF(EventPaymentOption.Discover__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/discover.jpg')}" alt="discover" width="52" height="31" id="imgDiscover"/>&nbsp;&nbsp; <img style="display:{!IF(EventPaymentOption.American_express__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/amex.jpg')}" alt="amex" width="29" height="29"  id="imgAmex"  />&nbsp;&nbsp; <img style="display:none" src="{!URLFOR($Resource.Payment_Event, 'images/jcb_card.gif')}" alt="jcb" width="29" height="35" id="imgJCB" />    
                </apex:outputpanel>  
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem >
                     <label for="txtNameOnCard" class="firstlabel">Name on Card <span class="req">*</span></label>
                     <apex:inputText value="{!xmlPaymentMethod.NameOnCard}" id="txtNameOnCard" styleClass="txtNameOnCard" maxlength="50" />
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
       
            <apex:pageBlockSectionItem >
                     <label for="txtCardNumber">Credit Card Number <span class="req">*</span></label>
                     <apex:inputText value="{!xmlPaymentMethod.CardNumber}" id="txtCardNumber" styleClass="txtCardNumber" maxlength="16" onkeyup="javascript:this.value=this.value.replace(/[^0-9]/g, '');"/>
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
           
            <apex:pageBlockSectionItem >
                  <label for="txtCvv2" id="lblCvv">Card Verification (CVV)<span class="req">*</span></label>
                  <apex:inputText value="{!xmlPaymentMethod.Cvv2}" maxlength="4" id="txtCvv" styleClass="txtCvv" onkeyup="javascript:this.value=this.value.replace(/[^0-9]/g, '');"/>
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
           
            <apex:pageBlockSectionItem >
                    <label for="select_ExpirationMonth">Expiration Date <span class="req">*</span></label>
                    <apex:outputText >
                       <apex:selectlist value="{!xmlPaymentMethod.ExpirationMonth}" id="select_ExpirationMonth" styleClass="select_ExpirationMonth"  size="1">             
                            <apex:selectOptions value="{!xmlstring.ExpireMonth}"/>
                       </apex:selectlist>/                                    
                        <apex:selectlist value="{!xmlPaymentMethod.ExpirationYear}" id="select_ExpirationYear" styleClass="select_ExpirationYear" size="1">             
                            <apex:selectOptions value="{!xmlstring.ExpireYear}"/>
                        </apex:selectlist>
                    </apex:outputText>
            </apex:pageBlockSectionItem>
        </apex:pageblocksection>   
        </apex:outputpanel>
     <div class="clr"></div>
     <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='ReferenceTransaction'}">
           <div id="TransactionBlock">
          <apex:pageBlockSection >
          <apex:pageBlockSectionItem >
             <label for="lblOrder_number">Order Number</label>
              <apex:inputText value="{!xmlPaymentMethod.OrderNumber}" id="txtOrderNumber" styleClass="txtOrderNumber"/>
          </apex:pageBlockSectionItem>
          
          <apex:pageBlockSectionItem >
          </apex:pageBlockSectionItem>
          
            <apex:pageBlockSectionItem >
             <label for="lblVaultguid">VaultGUID</label>
             <apex:inputText value="{!xmlPaymentMethod.VaultGUID}" id="txtVaultguid" styleClass="txtVaultguid"/>
          </apex:pageBlockSectionItem>
          
            <apex:pageBlockSectionItem >
          </apex:pageBlockSectionItem>
        </apex:pageBlockSection>    
</div>                     
         
        </apex:outputpanel>
         <div class="clr"></div>
          <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='Check'}"> 
            <apex:pageBlockSection >
          <apex:pageBlockSectionItem >
          <img src="{!URLFOR($Resource.Payment_Event, 'images/eCheck.png')}" alt="eCheck" width="49" height="29" id="img1"/>
          </apex:pageBlockSectionItem>
           <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem >
                <label for="txtRoutingNumber">Routing Number <span class="req">*</span></label>
                <apex:inputText maxlength="9" value="{!xmlPaymentMethod.RoutingNumber}" id="txtRoutingNumber"  styleClass="txtRoutingNumber"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem >
                    <label for="txtCheckNumber">Check Number</label> <span class="req">*</span>
                    <apex:inputText value="{!xmlPaymentMethod.CheckNumber}" maxlength="10" id="txtCheckNumber" styleClass="txtCheckNumber"/>
                    
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
                <label for="txtAccountNumber" class="firstlabel">Account Number <span class="req">*</span></label>
                <apex:inputText value="{!xmlPaymentMethod.AccountNumber}" maxlength="17" id="txtAccountNumber" styleClass="txtAccountNumber"/>
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
                <label for="txtAccountNumber2" class="firstlabel">Repeat Account Number <span class="req">*</span></label>
                <apex:inputText value="{!xmlPaymentMethod.AccountNumber}" id="txtAccountNumber2" styleClass="txtAccountNumber2" maxlength="17" />
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="select_AccountType">Account Type</label>
             <apex:selectlist value="{!xmlPaymentMethod.AccountType}" size="1">             
                         <apex:selectOptions value="{!xmlstring.AccountTypes}"/>
                         </apex:selectlist>
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="select_CheckType">Check Type </label>
             <apex:selectlist value="{!xmlPaymentMethod.CheckType}" size="1">             
                       <apex:selectOptions value="{!xmlstring.CheckTypes}"/>
                       </apex:selectlist>
             
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="txtNameOnAccount">Name on Account <span class="req">*</span></label>
             <apex:inputText value="{!xmlPaymentMethod.NameOnAccount}" maxlength="100" id="txtNameOnAccount" styleClass="txtNameOnAccount"/> 
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="select_IdType">Type of ID </label>
             <apex:selectlist value="{!xmlPaymentMethod.IdType}" size="1">             
                        <apex:selectOptions value="{!xmlstring.IdTypes}"/>
                        </apex:selectlist>
            </apex:pageBlockSectionItem> 
             
            
          </apex:pageBlockSection>   
        </apex:outputpanel>
        <div class="clr"></div>    
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='PurchaseOrder'}">
        <div id="poblock">
            <apex:pageBlockSection >
             <apex:pageBlockSectionItem >
                 <label for="txtPOAccount">Purchase Order Number </label><span class="req">*</span>
                  <apex:inputText value="{!xmlPaymentMethod.PurchaseOrderNumber}" maxlength="50" id="txtPOAccount" styleClass="txtPOAccount"/>
             </apex:pageBlockSectionItem> 
             
             <apex:pageBlockSectionItem >
             </apex:pageBlockSectionItem> 
             
         </apex:pageBlockSection>
    </div>
    </apex:outputpanel>
        <div class="clr"></div>    
        
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='Invoice'}">
         <div id="invoiceblock">
           <!-- <apex:pageBlockSection >
         
             <apex:pageBlockSectionItem >
                 <label for="txtInvoiceAccount">Check Number </label><span class="req">*</span>
                 <apex:inputText value="{!xmlPaymentMethod.InvoiceCheckNumber}" maxlength="50" id="txtInvoiceAccount" styleClass="txtInvoiceAccount"/>
                 
             </apex:pageBlockSectionItem> 
             
             <apex:pageBlockSectionItem >
             </apex:pageBlockSectionItem>
         
         </apex:pageBlockSection>-->     
</div>                                                                                        
         
        </apex:outputpanel>
        <div class="clr"></div>
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='CustomPaymentType'}">
        <div id="custompayment">
            <!--<apex:pageBlockSection >
               <apex:pageBlockSectionItem >
               <label for="txtCustomPaymentname">Custom Payment Name<span class="req">*</span></label>
               <apex:inputText value="{!xmlPaymentMethod.CustomPaymentName}" maxlength="50" id="txtCustomPaymentname" styleClass="txtCustomPaymentname"/>
               
               </apex:pageBlockSectionItem>
               
                <apex:pageBlockSectionItem >
                </apex:pageBlockSectionItem>
                
                 <apex:pageBlockSectionItem >
                 
                 <label for="txtCustompaymentnumber">Custom Payment Number<span class="req">*</span></label>
                 <apex:inputText value="{!xmlPaymentMethod.CustomPaymentNumber}" maxlength="50" id="txtCustompaymentnumber" styleClass="txtCustompaymentnumber"/>
             </apex:pageBlockSectionItem>
             
              <apex:pageBlockSectionItem >
             </apex:pageBlockSectionItem>
                  
               </apex:pageBlockSection> -->
</div>                   
        </apex:outputpanel>
        <script>
        $("#diveVTPage #topinfo table").removeAttr("class");
    $("#diveVTPage #topinfo table").addClass("paymenttbl");
        </script>
        </apex:outputpanel>
        </apex:panelGrid>
        
  </div></div>      
<script>

 function check1(val)
  {
    
     if(val==true)
     {
      
    
       $(".next1").fadeIn(1000); 
     }else{
  
       $(".next1").fadeOut(1000); 
     }
     
  }
  </script>
<div id="topInfo2">    
   <div class="clr"></div><div class="clr"></div>   
   
    <div id="ContentBotPayment" style="display:{!IF(EventId.CnP_PaaS_EVT__Show_terms_conditions__c==true,'block','none')}">      
        <apex:inputCheckbox id="term1" styleClass="term" onclick="return check1(this.checked);" style="display:{!IF(EventId.CnP_PaaS_EVT__Acknowledgement_Mandatory__c==true,'block','none')}"/>                            
        <apex:outputtext value="{!EventId.CnP_PaaS_EVT__Terms_Conditions__c}" escape="false"/>                 
     </div>
     
     <apex:outputPanel id="resulttransactionfail" >
     <apex:outputpanel rendered="{!IF(Resultdisply!='','true','false')}">
    <apex:outputtext value="{!Resultdisply}" escape="false" />
     </apex:outputpanel>    
    </apex:outputPanel>
     
    <div style="display:{!IF(EventId.CnP_PaaS_EVT__Acknowledgement_mandatory__c==true,'none','block')}" class="next1">  
    <table cellpadding="2" cellspacing="0" align="center" >     
        <tr><td>
        
            
     
       <apex:outputPanel >
        <apex:actionStatus id="mySaveStatus_2">
        <apex:facet name="stop">
        
        <apex:commandButton value="{!StyleRec.CnP_PaaS_EVT__Button_Label__c}" styleClass="next Submit test1" id="processpayment" onclick="if(!paymentvalidation('{!xmlPaymentMethod.PaymentType}')) return false;" rerender="testview" immediate="true"   oncomplete="insertJS();" status="mySaveStatus_2"   />        
       <!-- <apex:commandButton value="{!StyleRec.CnP_PaaS_EVT__Button_Label__c}" styleClass="next Submit test1" id="processpayment" rerender="testview" immediate="true"   oncomplete="insertJS();" status="mySaveStatus_2"   />      -->
        
        </apex:facet>
        <apex:facet name="start">
                 <apex:outputPanel >
                 <apex:image value="/img/loading32.gif" style="height: 15px;"/>
                 <apex:commandbutton value="Processing..." status="mySaveStatus_2" disabled="true"/>
                 </apex:outputPanel>
        </apex:facet>
        </apex:actionStatus>
        </apex:outputPanel>          
      </td></tr>
    </table>   
    </div>
</div>
</div>
</apex:outputPanel>
</apex:outputpanel>
                       
                     <!--Payment Form End Here   -->
</div>
                     
                        
                     </div>
                     </div>
                     </div>
                     
     
     </div>
  </div>
    <!--<apex:Iframe src="https://virtualterminal.cloud.clickandpledge.net/sfevents/default.aspx?AccountID=00D90000000amuN&sfcontactid=a0A90000005dopKEAQ&fn=eee&ln=eee&em=naresh4olive@gmail.com&pf1=item1&tl1=100.00&pf2=item2&tl2=100.00&ds1=9.00&pf3=item3&tl3=300.00&ds2=34.00" />-->
<!--<apex:Iframe src="https://virtualterminal.cloud.clickandpledge.net/{!PaymentUrl}" />-->
 <div id="Footer" style="display:{!IF(StyleRec.Display_Footer__c==true,'block','none')}">
             <span><apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Footer_information__c}" escape="false"/></span>
       </div> 
  </div>
   
  </apex:pageBlock>


<apex:pageBlock rendered="{!if(StyleRec.CnP_PaaS_EVT__Theme_Selection__c=='Custom Theme',true,false)}">
<apex:actionFunction action="{!UpdateRegistrant}" name="InsertRecord_JS" oncomplete="CallWebService_JS();" rerender="" status="mySaveStatus_2"/>
<apex:actionFunction action="{!PaymentAPIMethod}" name="CallWebService_JS" rerender="resulttransactionsucess,resulttransactionfail" status="mySaveStatus_2"/>
  <Title>{!EventRec.Event_title__c}</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  <script >
   function disableBackButton()
    {
       window.history.forward();
    }
    setTimeout("disableBackButton()", 0);
  function check(val)
  {
    //alert(val);
     if(val==true)
     {
      // $(".Submit").attr('style','display:block');
      $(".test_1").fadeIn(1000); 
     }else{
    //  $(".Submit").attr('style','display:none'); 
      $(".test_1").fadeOut(1000); 
     }
     
  }
  function check1(val)
  {
    //alert(val);
     if(val==true)
     {
      
    
       $(".next1").fadeIn(1000); 
     }else{
  
       $(".next1").fadeOut(1000); 
     }
     
  }
  

</script>
<style> <apex:outputText value="{!StyleRec.CnP_PaaS_EVT__Engine_CSS__c}" escape="false"></apex:outputText> </style>
<apex:repeat value="{!AttendeePaymentList}" var="field">
</apex:repeat>
    <apex:outputtext value="{!pdfcontent[0]}" escape="false" rendered="{!pdf}"/>
    <div style="display:{!if(timeout==true,'block','none')}">
                    <apex:outputtext value="{!EventRec.CnP_PaaS_EVT__Event_Ended__c}" escape="false"/> 
           </div> 
           <div style="display:{!if(eventsoldout==true,'block','none')}">
                    <apex:outputtext value="{!EventRec.CnP_PaaS_EVT__Sold_Out__c}" escape="false"/> 
     </div>
    <apex:outputLink value="/servlet/servlet.FileDownload?file={!mydocAjenda.Id}" target="_blank" style="text-decoration:none">
              <div align="right" class="DownloadAgenda" id="{!mydocAjenda.Id}" style="display:{!IF(pdfshow=='true' && mydocAjenda.Id!="",'block','none')}">
                    <div style="margin-top:2px;float:left;"><apex:image url="{!URLFOR($Resource.CnP_PaaS_EVT__pdf_icon)}" /></div>{!if(EventRec.CnP_PaaS_EVT__Agenda_Display_Name__c!="",EventRec.CnP_PaaS_EVT__Agenda_Display_Name__c,'Download Agenda')}
            
              </div>
    </apex:outputLink>
    
    <apex:outputtext value="{!themecontent[0]}" escape="false" />
    <div align="left" style="padding-top:10px;">
                                <!--<apex:commandButton value="Back" action="{!goBack}" styleClass="Submit" style="color:black"/>-->
    </div>
             <apex:pageBlockSection rendered="{!ck}">   
                 <apex:outputLabel value="Payment Summary" style=" ">
                 </apex:outputLabel>
                 <apex:outputText value="" />
                 <apex:outputLabel value="Total Fee"  style="padding-left:5px;font-weight:bold;text-align:right;display:block;float:left; " ></apex:outputLabel>
                 <apex:outputText value="{0, number,$###,###,##0.00}" style="width:95%;text-align:right;font-weight:bold;display:block;float:left;"><apex:param value="{!GrossPrice}"/></apex:outputText>
            
                 <apex:outputLabel value="Total Discount" style="padding-left:5px;font-weight:bold;text-align:right;display:block;float:left; " ></apex:outputLabel>
                 <apex:outputText value="{0, number,-$###,###,##0.00}" style="width:95%;text-align:right;font-weight:bold;display:block;float:left;">
                 <apex:param value="{!TotalDiscount}"/>      </apex:outputText>
                 <apex:outputLabel value="Total Tax" style="padding-left:5px;font-weight:bold;text-align:right;display:block;float:left; " ></apex:outputLabel>
                 <apex:outputText value="{0, number,$###,###,##0.00}" style="width:95%;text-align:right;font-weight:bold;display:block;float:left;">
                 <apex:param value="{!TotalTax}"/>
                 </apex:outputText>
            
                 <apex:outputLabel value="Grand Total" style="padding-left:5px;font-weight:bold;text-align:right;display:block;float:left; " ></apex:outputLabel>
                  <apex:outputText value="{0, number,$###,###,##0.00}" style="width:95%;text-align:right;font-weight:bold;display:block;float:left;">
                 <apex:param value="{!NetPrice}"/>
                 </apex:outputText>            
                  

          </apex:pageBlockSection> 
       <br/>
        <div id="ContentBot" style="display:{!IF(StyleRec.CnP_PaaS_EVT__Show_terms_conditions__c==true,'block','none')}">      
                              <apex:inputCheckbox id="term" styleClass="term" onclick="return check(this.checked);" style="display:{!IF(StyleRec.CnP_PaaS_EVT__Acknowledgement_mandatory__c==true,'block','none')}"/>                            
                              <apex:outputtext value="{!StyleRec.CnP_PaaS_EVT__Terms_conditions__c}" escape="false"/>                 
                             </div>
      <!-- <div> 
        <apex:inputCheckbox id="term" styleClass="term" onclick="return check(this.checked);" style="display:{!IF(re==true && tc==true,'block','none')};"/>                           
               
                 <apex:outputtext value="{!termcontent[0]}" escape="false" />
         </div>  
        
              <div style="display:{!IF(re==true,'none','block')}" class="test_1">  -->  
             <div style="display:{!IF(StyleRec.Acknowledgement_mandatory__c==true,'none','block')}" class="test_1">    
             
           
                     <!--Payment Form Start Here  -->      
           <center>     
    <apex:outputPanel id="resulttransactionfail" >
     <apex:outputpanel rendered="{!IF(Resultdisply!='','true','false')}">
     <apex:outputtext value="{!Resultdisply}" escape="false" />
     </apex:outputpanel>    
    </apex:outputPanel></center>
                     
                     <apex:outputpanel id="paymentblock" rendered="{!ck}">
                     <apex:outputPanel style="display:{!IF(Resultdisply!='' && Resultdisply=='Transaction processed successfully','none','block')}"> 
                                
        <div class="clr"></div>            
         <div class="clr"></div>           
  <div id="diveVTPage">

 <div id="topinfo">
    <div id="divInformationArea"> 
    <apex:panelGrid id="PaymentSelection"> 
        <!--<apex:outputpanel id="PaymentSelection1" > -->
        <apex:outputpanel styleClass="PaymentMethod" id="PayeeInformation">
       
            <apex:pageBlockSection columns="2"  collapsible="false" title="{!IF(NetPrice==0,'Additional Information','Billing Information')}">
         
                               <apex:repeat value="{!availableContactFields}" var="field">                                
                                <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field!='MailingCountry',true,false)}">                                 
                                 <apex:outputPanel >
                                  <apex:outputText value="{!field.Label}"> </apex:outputText>
                                  <apex:outputtext value="{!IF(field.req==true,'<span class=req>*</span>','')}"  escape="false"></apex:outputText>
                                   </apex:outputPanel>
               
                                 
                                 <apex:inputField value="{!acc[field.Field]}"    style="width:{!if(field.Label=="Title",'45px;','')}"     onblur="trimvalue(this.value,'{!IF(field.req==true ,field.Field,field.Field)}');"  styleClass="{!IF(field.req==true ,field.Field&' required',field.Field)}"     />
                                
                                

                                  </apex:pageBlockSectionItem>
                                  <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field!='MailingCountry',true,false)}">
                                  </apex:pageBlockSectionItem>
                                  <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field=='MailingCountry',true,false)}">
         <apex:outputPanel >
   <apex:OutputText value="Country" />
  
   <apex:outputtext value="{!IF(field.req==true,'<span class=req>*</span>','')}"  escape="false"></apex:outputText>
   <apex:outputText >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   </apex:outputText>
   </apex:outputPanel>
   
   
   <apex:selectlist value="{!PayeeCountry}" size="1" styleClass="{!IF(field.req==true,field.Field&' required' ,field.Field)}">             
              <apex:selectOptions value="{!xmlstring.CountryCodes}"/>
          </apex:selectlist>
         
         </apex:pageBlockSectionItem> 
    <apex:pageBlockSectionItem rendered="{!IF(field.visable==true && field.Field=='MailingCountry',true,false)}">
                                  </apex:pageBlockSectionItem>                                 
                                </apex:repeat>
                                </apex:pageblocksection>
        
                        </apex:outputpanel>
    </apex:panelGrid>
     <apex:outputpanel id="PaymentSelection1" rendered="{!IF(NetPrice > 0.0,true,false)}" >
              <apex:pageblocksection >
             
                  <apex:pageBlockSectionItem >
                  <apex:actionregion >
                      <apex:selectRadio value="{!xmlPaymentMethod.PaymentType}">             
                      <apex:actionsupport event="onchange" action="{!ChangePaymentType}"  rerender="PaymentMethod,processpayment"/> 
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Credit_card__c==true,'true','false')}"  itemValue="CreditCard" itemLabel="Credit Card"/>
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__e_check__c==true,'true','false')}" itemValue="Check" itemLabel="eCheck" /> 
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Invoice_P_O__c==true,'true','false')}" itemValue="Invoice" itemLabel="Invoice"/> 
                        <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Purchase_order__c==true,'true','false')}" itemValue="PurchaseOrder" itemLabel="Purchase Order"/>
                       <apex:selectOption rendered="{!IF(EventPaymentOption.CnP_PaaS_EVT__Custom_Payment_Check__c==true,true,false)}" itemValue="CustomPaymentType" itemLabel="{!EventPaymentOption.CnP_PaaS_EVT__Custom_Payment_Name__c}"/>
                        
                                                   
                      </apex:selectRadio> </apex:actionregion>
                     
                  </apex:pageBlockSectionItem>
                   
              </apex:pageblocksection>
        </apex:outputpanel>  
        <div class="clr"></div>    
        <apex:panelGrid id="PaymentMethod"  styleClass="PaymentMethod" rendered="{!IF(NetPrice > 0.0,true,false)}">
         
    
    <apex:outputpanel styleClass="PaymentMethod">  
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='CreditCard'}">       
         <apex:pageblocksection columns="2">        
            <apex:pageBlockSectionItem > 
           <apex:outputpanel styleClass="cardicn"> 
            
                       <img style="display:{!IF(EventPaymentOption.Visa__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/visa.jpg')}" alt="visa" width="49" height="29" id="imgVisa" />&nbsp;&nbsp; <img style="display:{!IF(EventPaymentOption.master_card__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/mastercard.gif')}" alt="mastercard" width="49" height="29" id="imgMasterCard" />&nbsp;&nbsp; <img style="display:{!IF(EventPaymentOption.Discover__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/discover.jpg')}" alt="discover" width="52" height="31" id="imgDiscover"/>&nbsp;&nbsp; <img style="display:{!IF(EventPaymentOption.American_express__c==true,'inline','none')}" src="{!URLFOR($Resource.Payment_Event, 'images/amex.jpg')}" alt="amex" width="29" height="29"  id="imgAmex"  />&nbsp;&nbsp; <img style="display:none" src="{!URLFOR($Resource.Payment_Event, 'images/jcb_card.gif')}" alt="jcb" width="29" height="35" id="imgJCB" />    
                    </apex:outputpanel>  
            </apex:pageBlockSectionItem>
      
             <apex:pageBlockSectionItem >
                        </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
                     <label for="txtNameOnCard" class="firstlabel">Name on Card <span class="req">*</span></label>
                     <apex:inputText value="{!xmlPaymentMethod.NameOnCard}" id="txtNameOnCard" styleClass="txtNameOnCard" maxlength="50" />
            </apex:pageBlockSectionItem>
        
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
       
            <apex:pageBlockSectionItem >
                     <label for="txtCardNumber">Credit Card Number <span class="req">*</span></label>
                     <apex:inputText value="{!xmlPaymentMethod.CardNumber}" id="txtCardNumber" styleClass="txtCardNumber" maxlength="16" onkeyup="javascript:this.value=this.value.replace(/[^0-9]/g, '');"/>
            </apex:pageBlockSectionItem>
         
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
           
           <apex:pageBlockSectionItem >
                  <label for="txtCvv2" id="lblCvv">Card Verification (CVV)<span class="req">*</span></label>
                  <apex:inputText value="{!xmlPaymentMethod.Cvv2}" maxlength="4" id="txtCvv" styleClass="txtCvv" onkeyup="javascript:this.value=this.value.replace(/[^0-9]/g, '');"/>
           </apex:pageBlockSectionItem>
           
            <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
           
             <apex:pageBlockSectionItem >
                    <label for="select_ExpirationMonth">Expiration Date <span class="req">*</span></label>
                    <apex:outputText >
                       <apex:selectlist value="{!xmlPaymentMethod.ExpirationMonth}" id="select_ExpirationMonth" styleClass="select_ExpirationMonth"  size="1">             
                            <apex:selectOptions value="{!xmlstring.ExpireMonth}"/>
                       </apex:selectlist>/                                    
                        <apex:selectlist value="{!xmlPaymentMethod.ExpirationYear}" id="select_ExpirationYear" styleClass="select_ExpirationYear" size="1">             
                            <apex:selectOptions value="{!xmlstring.ExpireYear}"/>
                        </apex:selectlist>
                    </apex:outputText>
             </apex:pageBlockSectionItem>
        </apex:pageblocksection>   
        </apex:outputpanel>
        <div class="clr"></div>
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='ReferenceTransaction'}">
           <div id="TransactionBlock">
          <apex:pageBlockSection >
          <apex:pageBlockSectionItem >
             <label for="lblOrder_number">Order Number</label>
              <apex:inputText value="{!xmlPaymentMethod.OrderNumber}" id="txtOrderNumber" styleClass="txtOrderNumber"/>
          </apex:pageBlockSectionItem>
          
          <apex:pageBlockSectionItem >
          </apex:pageBlockSectionItem>
          
            <apex:pageBlockSectionItem >
             <label for="lblVaultguid">VaultGUID</label>
             <apex:inputText value="{!xmlPaymentMethod.VaultGUID}" id="txtVaultguid" styleClass="txtVaultguid"/>
          </apex:pageBlockSectionItem>
          
            <apex:pageBlockSectionItem >
          </apex:pageBlockSectionItem>
        </apex:pageBlockSection>    
</div>                     
         
        </apex:outputpanel>
         <div class="clr"></div>
          <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='Check'}"> 
            <apex:pageBlockSection >
          <apex:pageBlockSectionItem >
          <img src="{!URLFOR($Resource.Payment_Event, 'images/eCheck.png')}" alt="eCheck" width="49" height="29" id="img1"/>
          </apex:pageBlockSectionItem>
           <apex:pageBlockSectionItem >
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem >
                <label for="txtRoutingNumber">Routing Number <span class="req">*</span></label>
                <apex:inputText maxlength="9" value="{!xmlPaymentMethod.RoutingNumber}" id="txtRoutingNumber" onkeyup="javascript:this.value=this.value.replace(/[^0-9]/g, '');" styleClass="txtRoutingNumber"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem >
                    <label for="txtCheckNumber">Check Number</label> <span class="req">*</span>
                    <apex:inputText value="{!xmlPaymentMethod.CheckNumber}" maxlength="10" id="txtCheckNumber" styleClass="txtCheckNumber"/>
                    
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
                <label for="txtAccountNumber" class="firstlabel">Account Number <span class="req">*</span></label>
                <apex:inputText value="{!xmlPaymentMethod.AccountNumber}" maxlength="17" id="txtAccountNumber" styleClass="txtAccountNumber"/>
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
                <label for="txtAccountNumber2" class="firstlabel">Repeat Account Number <span class="req">*</span></label>
                <apex:inputText value="{!xmlPaymentMethod.AccountNumber}" id="txtAccountNumber2" styleClass="txtAccountNumber2" maxlength="17" />
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="select_AccountType">Account Type</label>
             <apex:selectlist value="{!xmlPaymentMethod.AccountType}" size="1">             
                         <apex:selectOptions value="{!xmlstring.AccountTypes}"/>
                         </apex:selectlist>
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="select_CheckType">Check Type </label>
             <apex:selectlist value="{!xmlPaymentMethod.CheckType}" size="1">             
                       <apex:selectOptions value="{!xmlstring.CheckTypes}"/>
                       </apex:selectlist>
             
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="txtNameOnAccount">Name on Account <span class="req">*</span></label>
             <apex:inputText value="{!xmlPaymentMethod.NameOnAccount}" maxlength="100" id="txtNameOnAccount" styleClass="txtNameOnAccount"/> 
            </apex:pageBlockSectionItem>
            
             <apex:pageBlockSectionItem >
             <label for="select_IdType">Type of ID </label>
             <apex:selectlist value="{!xmlPaymentMethod.IdType}" size="1">             
                        <apex:selectOptions value="{!xmlstring.IdTypes}"/>
                        </apex:selectlist>
            </apex:pageBlockSectionItem>      
            
            
          </apex:pageBlockSection>   
        </apex:outputpanel>
        <div class="clr"></div>    
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='PurchaseOrder'}">
        <div id="poblock">
            <apex:pageBlockSection >
             <apex:pageBlockSectionItem >
                 <label for="txtPOAccount">Purchase Order Number  </label>
                  <apex:inputText value="{!xmlPaymentMethod.PurchaseOrderNumber}" maxlength="50" id="txtPOAccount" styleClass="txtPOAccount"/>
             </apex:pageBlockSectionItem> 
             
             <apex:pageBlockSectionItem >
             </apex:pageBlockSectionItem> 
             
         </apex:pageBlockSection> 
    </div>
    </apex:outputpanel>
        <div class="clr"></div>    
        
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='Invoice'}">
         <div id="invoiceblock">
            <!--<apex:pageBlockSection >
         
             <apex:pageBlockSectionItem >
                 <label for="txtInvoiceAccount">Check Number </label>
                 <apex:inputText value="{!xmlPaymentMethod.InvoiceCheckNumber}" maxlength="50" id="txtInvoiceAccount" styleClass="txtInvoiceAccount"/>
                 
             </apex:pageBlockSectionItem> 
             
             <apex:pageBlockSectionItem >
             </apex:pageBlockSectionItem>
         
         </apex:pageBlockSection> -->    
</div>                                                                                        
         
        </apex:outputpanel>
        <div class="clr"></div>
        <apex:outputpanel rendered="{!xmlPaymentMethod.PaymentType=='CustomPaymentType'}">
        <div id="custompayment">
            <!--<apex:pageBlockSection >
               <apex:pageBlockSectionItem >
               <label for="txtCustomPaymentname">Custom Payment Name<span class="req">*</span></label>
               <apex:inputText value="{!xmlPaymentMethod.CustomPaymentName}" maxlength="50" id="txtCustomPaymentname" styleClass="txtCustomPaymentname"/>
               
               </apex:pageBlockSectionItem>
               
                <apex:pageBlockSectionItem >
                </apex:pageBlockSectionItem>
                
                 <apex:pageBlockSectionItem >
                 
                 <label for="txtCustompaymentnumber">Custom Payment Number<span class="req">*</span></label>
                 <apex:inputText value="{!xmlPaymentMethod.CustomPaymentNumber}" maxlength="50" id="txtCustompaymentnumber" styleClass="txtCustompaymentnumber"/>
             </apex:pageBlockSectionItem>
             
              <apex:pageBlockSectionItem >
             </apex:pageBlockSectionItem>
                  
               </apex:pageBlockSection> -->
</div>                
        </apex:outputpanel>
        <script>
        $("#diveVTPage #topinfo table").removeAttr("class");
    $("#diveVTPage #topinfo table").addClass("paymenttbl");
   
        </script>
        </apex:outputPanel>
        </apex:panelGrid>
        
        
  </div></div>      

<div id="topInfo2">    
   <div class="clr"></div><div class="clr"></div>
     <div id="ContentBotPayment" style="display:{!IF(EventId.Show_terms_conditions__c==true,'block','none')}">      
        <apex:inputCheckbox id="term1" styleClass="term" onclick="return check1(this.checked);" style="display:{!IF(EventId.CnP_PaaS_EVT__Acknowledgement_Mandatory__c==true,'block','none')}"/>                            
        <apex:outputtext value="{!EventId.CnP_PaaS_EVT__Terms_Conditions__c}" escape="false"/>                 
     </div>
    
      <div style="display:{!IF(EventId.Acknowledgement_mandatory__c==true,'none','block')}" class="next1"> 
    <table cellpadding="2" cellspacing="0" align="center" >
       
   
       
        <tr>

            <td>     
       <apex:outputPanel >
        <apex:actionStatus id="mySaveStatus_2">
        <apex:facet name="stop">
        <!--<apex:commandButton value="{!StyleRec.CnP_PaaS_EVT__Button_Label__c}" styleClass="next Submit test1" id="processpayment" onclick="if(!paymentvalidation('{!xmlPaymentMethod.PaymentType}')) return false;" oncomplete="insertJS();" status="mySaveStatus_2"   />-->         
        <!--<apex:commandButton value="{!StyleRec.CnP_PaaS_EVT__Button_Label__c}" styleClass="next Submit test1" id="processpayment" onclick="if(!paymentvalidation('{!xmlPaymentMethod.PaymentType}')) return false;" rerender="resulttransactionsucess,resulttransactionfail,paymentblock"   action="{!PaymentAPIMethod}" status="mySaveStatus_2"   />-->
        <apex:commandButton value="{!StyleRec.CnP_PaaS_EVT__Button_Label__c}" styleClass="next Submit test1" id="processpayment" onclick="if(!paymentvalidation('{!xmlPaymentMethod.PaymentType}')) return false;" rerender="testview"   oncomplete="insertJS();" status="mySaveStatus_2"   />         
       
        </apex:facet>
        <apex:facet name="start">
                 <apex:outputPanel >

                 <apex:image value="/img/loading32.gif" style="height: 15px;"/>

                 <apex:commandbutton value="Processing..." status="mySaveStatus_2" disabled="true"/>
                 
               </apex:outputPanel>

           </apex:facet>
        </apex:actionStatus>
         
         
       </apex:outputPanel>          
                 
            </td>
        </tr>
    </table>   
     </div>
</div>
</div>                 

                       
                       
                        </apex:outputPanel>
                       </apex:outputpanel> 
                       
                     <!--Payment Form End Here   -->
   
     
                
              </div>
       
      <apex:outputtext value="{!themecontent[1]}" escape="false" />
   
  </apex:pageBlock>
    </apex:form>
  <div id="cnp">Powered by Click &amp; Pledge</div>
</apex:page>